<!-- Read Only content -->
<div *ngIf="readOnly; else formContent">
  <clr-stack-view class="mt-2">
    <clr-stack-block>
      <clr-stack-label>VCH Name</clr-stack-label>
      <clr-stack-content>{{model.name}}</clr-stack-content>
    </clr-stack-block>
    <clr-stack-block>
      <clr-stack-label>Container VM name template</clr-stack-label>
      <clr-stack-content>{{model.containerNameConvention}}</clr-stack-content>
    </clr-stack-block>
    <clr-stack-block>
      <clr-stack-label>Debug</clr-stack-label>
      <clr-stack-content>{{model.debug ? debugOptions[model.debug].display : debugOptions[0].display}}</clr-stack-content>
    </clr-stack-block>
    <clr-stack-block>
      <clr-stack-label>Syslog</clr-stack-label>
      <clr-stack-content>{{model.syslogAddress}}</clr-stack-content>
    </clr-stack-block>
  </clr-stack-view>
</div>


<!-- Form content -->
<ng-template #formContent>

  <clr-alert *ngIf="vicApplianceIp === null"
             [clrAlertType]="'danger'"
             [clrAlertClosable]="false">
    <clr-alert-item>
      <div class="alert-text">
        VIC appliance VM was not found or unreachable. Please make sure you have deployed it correctly.
      </div>
    </clr-alert-item>
  </clr-alert>

  <form [formGroup]="form" novalidate>

    <p class="mt-0">Provide the name and log configuration for this new Virtual Container Host (VCH).</p>

    <section class="form-block">

      <div class="form-group row">
        <div class="col-xs-3">

          <label class="required" for="nameInput">
            VCH name
          </label>

        </div>
        <div class="col-xs-7">

          <label for="nameInput"
                 aria-haspopup="true"
                 role="tooltip"
                 class="form-control tooltip tooltip-validation tooltip-lg tooltip-top-left"
                 [class.invalid]="form.get('name').invalid">

            <input id="nameInput"
                   class="form-control"
                   type="text"
                   placeholder="Enter virtual container host name"
                   formControlName="name">

            <span class="tooltip-content" *ngIf="form.get('name').hasError('required')">
              Name cannot be empty
            </span>

            <span class="tooltip-content" *ngIf="form.get('name').hasError('maxLength')">
              Name cannot be more than 80 characters long
            </span>

            <span class="tooltip-content" *ngIf="form.get('name').hasError('pattern')">
              Name contains characters that are not allowed
            </span>

            <span class="tooltip-content" *ngIf="form.get('name').hasError('resourcePoolExists')">
              There is already a VirtualApp or ResourcePool that exists with the same name
            </span>

          </label>

        </div>

        <clr-signpost>
          <clr-signpost-content [clrPosition]="'bottom-left'" *clrIfOpen>
              <span>
                Virtual container host names can contain up to 80 characters and must be unique within each vCenter
              </span>
          </clr-signpost-content>
        </clr-signpost>

      </div>

      <div class="form-group row">
        <div class="col-xs-3">

          <label for="nameInput">
            Container VM name template
          </label>

        </div>
        <div class="col-xs-2">

          <input id="container-name-convention-prefix"
                 class="form-control"
                 type="text"
                 placeholder="Prefix"
                 formControlName="containerNameConventionPrefix">

          <small class="text-muted text-nowrap" style="line-height: 1.5em">
            Example container VM names generated by this VCH using this template:<br>
            <span *ngIf="form.get('containerNameConvention').value === '{name}'" class="my-0">
              {{ form.get('containerNameConventionPrefix').value }}spleepy_kowalevski{{ form.get('containerNameConventionPostfix').value }}<br>
              {{ form.get('containerNameConventionPrefix').value }}jolly_nobel{{ form.get('containerNameConventionPostfix').value }}
            </span>
            <span *ngIf="form.get('containerNameConvention').value === '{id}'" class="my-0">
              {{ form.get('containerNameConventionPrefix').value }}4c01db0b339c{{ form.get('containerNameConventionPostfix').value }}<br>
              {{ form.get('containerNameConventionPrefix').value }}d7886598dbe2{{ form.get('containerNameConventionPostfix').value }}
            </span>
          </small>

        </div>
        <div class="col-xs-3">

          <div class="select form-control">
            <select id="container-name-convention-selector"
                    formControlName="containerNameConvention">
              <option value="{name}">Docker name</option>
              <option value="{id}">Container ID</option>
            </select>
          </div>

        </div>
        <div class="col-xs-2">

          <input id="container-name-convention-postfix"
                 class="form-control"
                 type="text"
                 placeholder="Suffix"
                 formControlName="containerNameConventionPostfix">

        </div>

        <clr-signpost>
          <clr-signpost-content [clrPosition]="'top-left'" *clrIfOpen>
            <span>
              The Container VM name is constructed from either the Docker name or ID with an optional prefix and suffix
            </span>
          </clr-signpost-content>
        </clr-signpost>

      </div>
    </section>

    <p class="mt-0">Set level of logging and an endpoint for log aggregation.</p>

    <section class="form-block">

      <div class="form-group row">
        <div class="col-xs-3">

          <label for="debug-level-selector">Debug</label>

        </div>
        <div class="col-xs-5">

          <div class="select form-control">
            <select id="debug-level-selector"
                    formControlName="debug">
              <option *ngFor="let option of debugOptions" [value]="option.value">
                {{option.display}}
              </option>
            </select>
          </div>

        </div>

        <clr-signpost>
          <clr-signpost-content [clrPosition]="'top-left'" *clrIfOpen>
              <span>
                Deploy the VCH with more verbose levels of logging, and optionally modify the behavior of vic-machine
                for troubleshooting purposes. This setting is persistent.
              </span>
          </clr-signpost-content>
        </clr-signpost>

      </div>

      <div class="form-group row">
        <div class="col-xs-3">

          <label for="debug-level-selector">Syslog</label>

        </div>
        <div class="col-xs-2">

          <div class="select form-control">
            <select id="syslog-transport-selector"
                    formControlName="syslogTransport">
              <option value="tcp">tcp</option>
              <option value="udp">udp</option>
            </select>
          </div>

        </div>
        <span class="mx-0 px-0">://</span>
        <div class="col-xs-3">

          <input id="syslog-host-selector"
                 class="form-control"
                 placeholder="IP or FQDN"
                 type="text"
                 formControlName="syslogHost">

        </div>
        <span class="mx-0 px-0">:</span>
        <div class="col-xs-2">

          <label for="syslog-port-selector"
                 aria-haspopup="true"
                 role="tooltip"
                 class="tooltip tooltip-validation tooltip-md tooltip-top-left form-control"
                 [class.invalid]="isFormControlInvalid('syslogPort')">

            <input id="syslog-port-selector"
                   class="form-control"
                   placeholder="Port"
                   type="text"
                   formControlName="syslogPort">

            <span class="tooltip-content" *ngIf="form.get('syslogPort').hasError('maxlength')">
              Port cannot be more than 5 digits long
            </span>

            <span class="tooltip-content" *ngIf="form.get('syslogPort').hasError('pattern')">
              Port should be numeric
            </span>

          </label>

        </div>

        <clr-signpost>
          <clr-signpost-content [clrPosition]="'top-left'" *clrIfOpen>
              <span>
                Configure the VCH to send logs to an external syslog endpoint.
              </span>
          </clr-signpost-content>
        </clr-signpost>

      </div>

    </section>
  </form>
</ng-template>
